<lg-header
  [backLink]="['/']"
  title="Debug"
/>

<lg-content-container class="flex flex-col space-y-4">
  <div class="flex flex-1 justify-end">
    <button
      class="app-button icon-only"
      (click)="plots.reload(); models.reload()"
    >
      <fa-icon [icon]="faRefresh" />
    </button>
  </div>

  <div class="rounded-lg border border-amber-200 bg-amber-50 p-3">
    <p class="text-sm text-amber-800">
      <strong>Achtung!</strong> Diese Ansicht ist f체r den Entwickler gedacht, um
      schneller Fehler zu finden. Du kannst Dir die Informationen gerne ansehen
      oder im Fehlerfall dem Entwickler weiterleiten, aber Du solltest nichts
      daran 채ndern.
    </p>
    <p class="mt-2 text-sm font-medium text-amber-800">
      Es gibt keinen Best채tigungsdialog, wenn Du auf einen Button dr체ckst.
    </p>
  </div>
</lg-content-container>

<lg-section
  title="Erkannte Plots"
  subtitle="Alle Plots, auch deren Modelle nicht mehr im Dokument sind."
/>

@let allPlots = plots.value();

<lg-content-container class="flex flex-col space-y-2">
  @if (plots.isLoading()) {
    <fa-icon
      [icon]="faRefresh"
      [animation]="'spin'"
    />
  } @else {
    @for (plot of allPlots; track plot.id) {
      <ul class="flex flex-col rounded-sm p-2 odd:bg-gray-200">
        <li>
          Id: {{ plot.id }}
          @if (!isPlot(plot)) {
            <fa-icon [icon]="faWarning" />
          }
        </li>
        @if (isPlot(plot)) {
          <li>
            <code class="text-2xs">{{ plot.model | json }}</code>
          </li>
        }
      </ul>
    }
  }
</lg-content-container>

<lg-section
  title="Erkannte Modelle"
  subtitle="Alle Modelle, auch deren Plots nicht mehr im Dokument sind."
/>

<lg-content-container class="flex flex-col space-y-2">
  @if (models.isLoading() || !allPlots) {
    <fa-icon
      [icon]="faRefresh"
      [animation]="'spin'"
    />
  } @else {
    @for (model of models.value(); track model.key) {
      <ul class="flex flex-col rounded-sm p-2 odd:bg-gray-200">
        <li>
          Key: {{ model.key }}
          @if (allPlots && !modelHasPlot(allPlots, model.key)) {
            <fa-icon [icon]="faWarning" />
          }
        </li>
        <li>
          <code class="text-2xs">{{ model.value | json }}</code>
        </li>
      </ul>
    }
  }
</lg-content-container>
